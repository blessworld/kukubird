var Comicview={author:"memoryboxes",version:"1.0",modified:"memoryboxes@163.com",website:"http://www.Comicview.com"};Comicview.utils={setParam:function(a,b){sessionStorage.removeItem(a);sessionStorage.setItem(a,b);},getParam:function(a){return sessionStorage.getItem(a);},removeParam:function(a){sessionStorage.removeItem(a);},setStorageParam:function(a,b){localStorage.removeItem(a);localStorage.setItem(a,b);},getStorageParam:function(a){return localStorage.getItem(a);},removeStorageParam:function(a){localStorage.removeItem(a);},setUserToken:function(b,a){if(sessionStorage.getItem("cootoken")){return;}else{$.getJSON(website+"/user/getusercootoken?callback=?",{"qq_name":b,"qq_uid":a},function(c){sessionStorage.setItem("cootoken",c.cootoken);Comicview.utils.isLogin.prototype.singnal="True";Comicview.controllers.user.pageshow();});}},getUserToken:function(){return sessionStorage.getItem("cootoken");},removeUserToken:function(){sessionStorage.removeItem("cootoken");},getUserBrowseHistory:function(a){var b=new Array();if(utils.getStorageParam("user_history")){b=utils.string2Array(utils.getStorageParam("user_history"));}a(b);},setUserBrowseHistory:function(){if(sessionStorage.getItem("akaname")==="undefined"){return;}var b=new Array();if(utils.getStorageParam("user_history")){b=utils.string2Array(utils.getStorageParam("user_history"));}var a=new Date().format("MM-dd hh:mm");b.unshift({"comic_id":sessionStorage.getItem("comic_id"),"akaname":sessionStorage.getItem("akaname"),"vol":sessionStorage.getItem("vol_no"),"capture":sessionStorage.getItem("capture_no"),"datetime":a});utils.setStorageParam("user_history",utils.array2String(b));},removeUserHistory:function(){sessionStorage.removeItem("histories");},isLogin:function(){},object2String:function(c){var d,a="";if(c){a+="{";for(var b in c){d=c[b];switch(typeof d){case ("object"):if(d&&d[0]){a+="'"+b+"':"+Comicview.utils.array2String(d)+",";}else{a+="'"+b+"':"+Comicview.utils.object2String(d)+",";}break;case ("string"):a+="'"+b+"':'"+encodeURI(d)+"',";break;default:a+=b+":"+d+",";}}a=a.substring(0,a.length-1)+"}";}return a;},array2String:function(d){var c,a="";if(d){a+="[";for(var b in d){c=d[b];switch(typeof c){case ("object"):if(c[0]){a+=Comicview.utils.array2String(c)+",";}else{a+=Comicview.utils.object2String(c)+",";}break;case ("string"):a+="'"+encodeURI(c)+"',";break;default:a+=c+",";}}a=a.substring(0,a.length-1)+"]";}return a;},string2Object:function(string){eval("var result = "+decodeURI(string));return result;},string2Array:function(string){eval("var result = "+decodeURI(string));return result;},getPropertyCount:function(b){var c,a=0;for(c in b){if(b.hasOwnProperty(c)){a++;}}return a;},};Comicview.controllers={};Comicview.run=function(a){var a=a,d=a.length;for(var c=0;c<d;c++){var f=a[c],h=f.id;e_array=f.event.split(",");for(var b=0;b<e_array.length;b++){var g=e_array[b];if($.trim(g).length==0){continue;}$("#"+h).live(g,Comicview.controllers[h][g]);}}Date.prototype.format=function(i){var j={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),"S":this.getMilliseconds()};if(/(y+)/.test(i)){i=i.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length));}for(var e in j){if(new RegExp("("+e+")").test(i)){i=i.replace(RegExp.$1,RegExp.$1.length==1?j[e]:("00"+j[e]).substr((""+j[e]).length));}}return i;};utils.setParam("need_intro","True");};